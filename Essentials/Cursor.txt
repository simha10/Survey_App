You're working on a full-stack GIS Survey application using:

- Frontend: React Native (Expo)
- Backend: Node.js with Express
- ORM: Prisma (PostgreSQL)
- Auth: JWT
- Validation: Zod
- Password Hashing: bcrypt
- Local Storage: AsyncStorage (React Native)

---

## ğŸ¯ Current Status

- Login, Register, and User Dashboard functionality is completed.
- Next feature to build is the **Survey Pane**, which allows surveyors or supervisors to fill and sync survey data.
- Database schema is already created using Prisma (schema included below).
- Form fields are divided into 5 logical blocks:  
  1. Survey Details  
  2. Property Details  
  3. Owner Details  
  4. Location Details  
  5. Other Details

---

## ğŸ§¾ Survey Form Requirements (Frontend)

1. After login, the user (Surveyor or Supervisor) is shown a dashboard with **4 clickable cards**:
   - Residential
   - Non-Residential
   - Mixed
   - Sync Data

2. When a user clicks on a card, they are shown a button at the bottom called **â€œAdd Surveyâ€**. On clicking, a detailed form appears.

3. The form:
   - Follows the **5-block structure**.
   - Fields marked with `*` are **mandatory**.
   - Fields not applicable to Residential surveys (like Plantation, Pollution, etc.) must be **conditionally hidden**.
   - Must be labeled clearly (**no placeholders**).
   - Fields use appropriate inputs:
     - Dropdowns for enums (populated from master tables via API)
     - TextInputs for open fields
     - Checkboxes or toggles where needed

4. On clicking â€œSave Surveyâ€:
   - The full survey object is stored in **AsyncStorage**
   - Syncing to backend happens **only when the user manually pushes via Sync Data**

---

## âš™ï¸ Survey Submission (Backend)

- Create an Express API `POST /api/surveys`
- Only users with role `SURVEYOR` or `SUPERVISOR` are allowed to submit.
- Validate JWT token, extract `userId`, and ensure the role is valid.
- Validate the form data with Zod
- Insert data into `SurveyDetails` and its related tables:
  - `PropertyDetails`
  - `OwnerDetails`
  - `LocationDetails`
  - `OtherDetails`
- Use the `uploadedById` field to track who submitted

---

## ğŸ“ Existing File Structure 

Survey_App
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ dist/
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”œâ”€â”€ authController.js
â”‚   â”‚   â”‚   â””â”€â”€ surveyorController.js
â”‚   â”‚   â”œâ”€â”€ dtos/
â”‚   â”‚   â”‚   â”œâ”€â”€ authDto.js
â”‚   â”‚   â”‚   â””â”€â”€ surveyorDto.js
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”‚   â””â”€â”€ authMiddleware.js
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â”œâ”€â”€ authRoutes.js
â”‚   â”‚   â”‚   â””â”€â”€ surveyorRoutes.js
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ authService.js
â”‚   â”‚   â”‚   â””â”€â”€ surveyorService.js
â”‚   â”‚   â””â”€â”€ app.js
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â”‚   â”œâ”€â”€ 20250619160558_init/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ migration.sql
â”‚   â”‚   â”‚   â”œâ”€â”€ 20250619171739_increase_password_length/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ migration.sql
â”‚   â”‚   â”‚   â”œâ”€â”€ 20250620054225_updated_password_lengths/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ migration.sql
â”‚   â”‚   â”‚   â”œâ”€â”€ 20250620074809_add_unique_to_role_name/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ migration.sql
â”‚   â”‚   â”‚   â”œâ”€â”€ 20250620103158_make_wardid_optional/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ migration.sql
â”‚   â”‚   â”‚   â”œâ”€â”€ 20250620105333_make_surveyor_fields_optional/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ migration.sql
â”‚   â”‚   â”‚   â””â”€â”€ migration_lock.toml
â”‚   â”‚   â”œâ”€â”€ schema.prisma
â”‚   â”‚   â””â”€â”€ seed.ts
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”œâ”€â”€ authController.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ surveyorController.ts
â”‚   â”‚   â”‚   â””â”€â”€ wardController.ts
â”‚   â”‚   â”œâ”€â”€ dtos/
â”‚   â”‚   â”‚   â”œâ”€â”€ authDto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ surveyorDto.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ userDto.ts
â”‚   â”‚   â”‚   â””â”€â”€ wardDto.ts
â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”‚   â””â”€â”€ authMiddleware.ts
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â”œâ”€â”€ authRoutes.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ surveyorRoutes.ts
â”‚   â”‚   â”‚   â””â”€â”€ wardRoutes.ts
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ authService.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ surveyorService.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ userService.ts
â”‚   â”‚   â”‚   â””â”€â”€ wardService.ts
â”‚   â”‚   â””â”€â”€ app.ts
â”‚   â”œâ”€â”€ .env
â”‚   â”œâ”€â”€ package-lock.json
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”œâ”€â”€ my-expo-app/
â”‚   â”œâ”€â”€ .expo/
â”‚   â”‚   â”œâ”€â”€ devices.json
â”‚   â”‚   â””â”€â”€ README.md
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â”œâ”€â”€ adaptive-icon.png
â”‚   â”‚   â”œâ”€â”€ favicon.png
â”‚   â”‚   â”œâ”€â”€ icon.png
â”‚   â”‚   â””â”€â”€ splash.png
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Container.tsx
â”‚   â”‚   â”œâ”€â”€ EditScreenInfo.tsx
â”‚   â”‚   â””â”€â”€ ScreenContent.tsx
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ CustomHeader.tsx
â”‚   â”‚   â”‚   â””â”€â”€ SideNav.tsx
â”‚   â”‚   â”œâ”€â”€ context/
â”‚   â”‚   â”‚   â””â”€â”€ ThemeContext.tsx
â”‚   â”‚   â”œâ”€â”€ navigation/
â”‚   â”‚   â”‚   â””â”€â”€ AppNavigator.tsx
â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â”œâ”€â”€ AdminDashboard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ProfileScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ RegisterScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SplashScreen.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SuperAdminDashboard.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SupervisorDashboard.tsx
â”‚   â”‚   â”‚   â””â”€â”€ SurveyorDashboard.tsx
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ authService.ts
â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚       â””â”€â”€ validation.ts
â”‚   â”œâ”€â”€ .env
â”‚   â”œâ”€â”€ app-env.d.ts
â”‚   â”œâ”€â”€ app.json
â”‚   â”œâ”€â”€ App.tsx
â”‚   â”œâ”€â”€ babel.config.js
â”‚   â”œâ”€â”€ cesconfig.json
â”‚   â”œâ”€â”€ eslint.config.js
â”‚   â”œâ”€â”€ global.css
â”‚   â”œâ”€â”€ metro.config.js
â”‚   â”œâ”€â”€ nativewind-env.d.ts
â”‚   â”œâ”€â”€ package-lock.json
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ prettier.config.js
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â””â”€â”€ tsconfig.json
â””â”€â”€ PROJECT_STATUS.md


---

## ğŸ“„ Form Field Definitions

(Use these to generate form blocks and validation)

### ğŸ“¦ Survey Details Block
- *ULB: Pre-filled (assigned ULB)
- *Zone: Pre-filled
- *Ward: Pre-filled
- *Mohalla: Dropdown (filtered by Ward)
- *Entry Date & Time: Auto-timestamp
- Parcel ID: Text
- *Map ID: Text
- *GIS ID: Text
- Sub-GIS ID: Text

### ğŸ¡ Property Details Block
- *Response Type: Dropdown (enum)
- *Old House No: Text
- Electricity Consumer Name: Text
- Water Sewerage Connection No: Text
- *Respondent Name: Text
- *Respondent Status: Dropdown (enum)

### ğŸ‘¤ Owner Details Block
- *Owner Name: Text
- *Father/Husband Name: Text
- Mobile Number: Text
- Aadhar Number: Text

### ğŸ“ Location Details Block
- Latitude: Text
- Longitude: Text
- *Assessment Year: Pre-filled
- *Property Type: Dropdown (enum)
- Building Name: Text
- *Road Type: Dropdown (enum)
- *Construction Year: Dropdown (last 50 years)
- *Construction Type: Dropdown (enum)
- Address/Road Name: Text
- *Locality: Text
- *PIN Code: Text
- Landmark: Text
- Four Way-East/West/North/South: Text
- New Ward: Pre-filled

### ğŸ”§ Other Details Block
- *Source of Water: Dropdown (enum)
- *Rain Water Harvesting: Dropdown (YES/NO)
- *Plantation Available: Dropdown (YES/NO) â€” Hide for Residential
- *Parking Available: Dropdown (YES/NO) â€” Hide for Residential
- *Pollution Created: Dropdown (YES/NO) â€” Hide for Residential
- *Pollution Measurement: Text â€” Hide for Residential
- *Water Supply within 200m: Checkbox
- *Sewerage Line within 100m: Checkbox
- *Disposal Type: Dropdown (enum)
- *Total Plot Area: Text
- *Built-up Area of Ground Floor: Text
- Remarks: Text

---

## ğŸ” Role Constraint

Enforce this on backend and optionally on frontend UI:
- âœ… Only `SURVEYOR` and `SUPERVISOR` can submit surveys
- âŒ Admins or other roles should not see survey entry UI

---

## ğŸ§¬ Schema.prisma

// ------------------------
// schema.prisma (All Good)
// ------------------------
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// ------
// ENUMS
// ------
enum YesNo {
  YES
  NO
}

enum AssignmentType {
  PRIMARY
  SECONDARY
}

enum ResponseType {
  OLD_PROPERTY
  NEW_PROPERTY
  DOOR_LOCK
  ACCESS_DENIED
}

enum PropertyType {
  HOUSE
  FLAT
  PLOT_LAND
}

enum RespondentStatus {
  OWNER
  OCCUPIER
  TENANT
  EMPLOYEE
  OTHER
}

enum RoadType {
  WIDTH_LESS_THAN_3M
  WIDTH_3_TO_11M
  WIDTH_12_TO_24M
  WIDTH_MORE_THAN_24M
}

enum ConstructionType {
  CONSTRUCTED
  NOT_CONSTRUCTED
  UNDER_CONSTRUCTION
}

enum WaterSource {
  OWN
  MUNICIPAL
  PUBLIC_TAP_WITHIN_100_YARDS
  PUBLIC_TAP_MORE_THAN_100_YARDS
}

enum DisposalType {
  SEWERAGE
  SEPTIC_TANK
}

enum ConstructionNature {
  PUCCKAA_RCC_RB_ROOF
  OTHER_PUCCKAA
  KUCCHHAA
}

enum SurveyType {
  RESIDENTIAL
  NON_RESIDENTIAL
  MIX
}

enum OccupancyStatus {
  SELF_OCCUPIED
  RENTED
  MIX
}

enum RolePermission {
  SUPER_ADMIN
  ADMIN
  SUPERVISOR
  SURVEYOR
}

// --------------
// Master Tables
// --------------

model UlbMaster {
  ulbId         String           @id @default(uuid())
  ulbName       String           @db.VarChar(50)
  isActive      Boolean          @default(false)
  description   String?          @db.Text
  ulbZoneMaps   UlbZoneMapping[]
  surveyDetails SurveyDetails[]
}

model ZoneMaster {
  zoneId        String            @id @default(uuid())
  zoneNumber    String            @db.VarChar(50)
  isActive      Boolean           @default(false)
  description   String?           @db.Text
  ulbZoneMaps   UlbZoneMapping[]
  zoneWardMaps  ZoneWardMapping[]
  surveyDetails SurveyDetails[]
}

model WardMaster {
  wardId              String               @id @default(uuid())
  wardNumber          String               @db.VarChar(20)
  isActive            Boolean              @default(false)
  wardName            String               @db.VarChar(12)
  description         String?              @db.Text
  zoneWardMaps        ZoneWardMapping[]
  wardMohallaMaps     WardMohallaMapping[]
  surveyorAssignments SurveyorAssignment[]
  wardStatusMaps      WardStatusMapping[]
  surveyDetails       SurveyDetails[]
  supervisors         Supervisors[]
}

model MohallaMaster {
  mohallaId           String               @id @default(uuid())
  mohallaName         String               @db.VarChar(50)
  isActive            Boolean              @default(false)
  description         String?              @db.Text
  wardMohallaMaps     WardMohallaMapping[]
  surveyorAssignments SurveyorAssignment[]
  surveyDetails       SurveyDetails[]
}

model ResponseTypeMaster {
  responseTypeId   String            @id @default(uuid())
  responseTypeName String            @db.VarChar(50)
  isActive         Boolean           @default(false)
  description      String?           @db.Text
  propertyDetails  PropertyDetails[]
}

model PropertyTypeMaster {
  propertyTypeId   String            @id @default(uuid())
  propertyTypeName String            @db.Char(50)
  isActive         Boolean           @default(false)
  description      String?           @db.Text
  locationDetails  LocationDetails[]
}

model RespondentStatusMaster {
  respondentStatusId   String            @id @default(uuid())
  respondentStatusName String            @db.VarChar(20)
  isActive             Boolean           @default(false)
  description          String?           @db.Text
  propertyDetails      PropertyDetails[]
}

model RoadTypeMaster {
  roadTypeId      String            @id @default(uuid())
  roadTypeName    String            @db.VarChar(50)
  isActive        Boolean           @default(false)
  description     String?           @db.Text
  locationDetails LocationDetails[]
}

model ConstructionTypeMaster {
  constructionTypeId   String            @id @default(uuid())
  constructionTypeName String            @db.VarChar(50)
  isActive             Boolean           @default(false)
  description          String?           @db.Text
  locationDetails      LocationDetails[]
}

model WaterSourceMaster {
  waterSourceId   String         @id @default(uuid())
  waterSourceName String         @db.VarChar(50)
  isActive        Boolean        @default(false)
  description     String?        @db.Text
  otherDetails    OtherDetails[]
}

model DisposalTypeMaster {
  disposalTypeId   String         @id @default(uuid())
  disposalTypeName String         @db.VarChar(50)
  isActive         Boolean        @default(false)
  description      String?        @db.Text
  otherDetails     OtherDetails[]
}

model NrPropertyCategoryMaster {
  propertyCategoryId                String                             @id @default(uuid())
  propertyCategoryNumber            Int
  propertyCategoryName              String                             @db.VarChar(100)
  isActive                          Boolean                            @default(false)
  description                       String?                            @db.Text
  createdAt                         DateTime                           @default(now())
  subCategories                     NrPropertySubCategoryMaster[]
  nonResidentialPropertyAssessments NonResidentialPropertyAssessment[]
}

model NrPropertySubCategoryMaster {
  subCategoryId                     String                             @id @default(uuid())
  subCategoryNumber                 Int
  subCategoryName                   String                             @db.VarChar(100)
  isActive                          Boolean                            @default(false)
  description                       String?                            @db.Text
  createdAt                         DateTime                           @default(now())
  propertyCategoryId                String
  propertyCategory                  NrPropertyCategoryMaster           @relation(fields: [propertyCategoryId], references: [propertyCategoryId], onDelete: Restrict)
  nonResidentialPropertyAssessments NonResidentialPropertyAssessment[]

  @@index([propertyCategoryId])
  @@index([isActive])
}

model ConstructionNatureMaster {
  constructionNatureId              String                             @id @default(uuid())
  constructionNatureName            String                             @db.VarChar(50)
  isActive                          Boolean                            @default(false)
  description                       String?                            @db.Text
  residentialPropertyAssessments    ResidentialPropertyAssessment[]
  nonResidentialPropertyAssessments NonResidentialPropertyAssessment[]
}

model SurveyTypeMaster {
  surveyTypeId   String          @id @default(uuid())
  surveyTypeName String          @db.Char(20)
  isActive       Boolean         @default(true)
  description    String?         @db.Text
  surveyDetails  SurveyDetails[]
}

model OccupancyStatusMaster {
  occupancyStatusId                 String                             @id @default(uuid())
  occupancyStatusName               String                             @db.VarChar(50)
  isActive                          Boolean                            @default(true)
  description                       String?                            @db.Text
  residentialPropertyAssessments    ResidentialPropertyAssessment[]
  nonResidentialPropertyAssessments NonResidentialPropertyAssessment[]
}

model SurveyStatusMaster {
  statusId                 String                @id @default(uuid())
  statusName               String                @db.VarChar(50)
  isActive                 Boolean               @default(true)
  description              String?               @db.Text
  surveyStatusMaps         SurveyStatusMapping[]
  surveyStatusMapsReverted SurveyStatusMapping[] @relation("RevertedFrom")
}

model WardStatusMaster {
  statusId       String              @id @default(uuid())
  statusName     String              @db.VarChar(50)
  isActive       Boolean             @default(true)
  description    String?             @db.Text
  wardStatusMaps WardStatusMapping[]
}

model UsersMaster {
  userId                        String                @id @default(uuid())
  username                      String                @db.Char(50)
  password                      String                @db.VarChar(200)
  mobileNumber                  String?               @db.VarChar(20)
  isCreatedAt                   DateTime              @default(now())
  isActive                      Boolean               @default(false)
  description                   String?               @db.Text
  surveyorAssignments           SurveyorAssignment[]
  surveyorAssignmentsAssignedBy SurveyorAssignment[]  @relation("AssignedBy")
  wardStatusMaps                WardStatusMapping[]
  surveyStatusMaps              SurveyStatusMapping[]
  userRoleMaps                  UserRoleMapping[]
  sessions                      Session[]
  surveyors                     Surveyors[]
  supervisors                   Supervisors[]
  admins                        Admins[]
  uploadedSurveys               SurveyDetails[]       @relation("UsersMasterToSurveyDetails")
}

model RolePermissionMaster {
  roleId       String            @id @default(uuid())
  roleName     String            @db.VarChar(30) @unique
  isActive     Boolean           @default(false)
  description  String?           @db.Text
  userRoleMaps UserRoleMapping[]
}

// ---------------
// Mapping Tables
// ---------------

model UlbZoneMapping {
  ulbZoneMapId String      @id @default(uuid())
  ulbId        String
  zoneId       String
  isActive     Boolean     @default(true)
  ulb          UlbMaster   @relation(fields: [ulbId], references: [ulbId])
  zone         ZoneMaster  @relation(fields: [zoneId], references: [zoneId])
  surveyors    Surveyors[]

  @@unique([ulbId, zoneId])
}

model ZoneWardMapping {
  zoneWardMapId String      @id @default(uuid())
  zoneId        String
  wardId        String
  isActive      Boolean     @default(true)
  zone          ZoneMaster  @relation(fields: [zoneId], references: [zoneId])
  ward          WardMaster  @relation(fields: [wardId], references: [wardId])
  surveyors     Surveyors[]

  @@unique([zoneId, wardId])
}

model WardMohallaMapping {
  wardMohallaMapId    String               @id @default(uuid())
  wardId              String
  mohallaId           String
  isActive            Boolean              @default(true)
  ward                WardMaster           @relation(fields: [wardId], references: [wardId])
  mohalla             MohallaMaster        @relation(fields: [mohallaId], references: [mohallaId])
  surveyorAssignments SurveyorAssignment[]
  surveyors           Surveyors[]

  @@unique([wardId, mohallaId])
}

model SurveyorAssignment {
  assignmentId     String             @id @default(uuid())
  userId           String
  assignmentType   String             @db.VarChar(10)
  wardId           String
  mohallaId        String
  wardMohallaMapId String
  assignedById     String
  isActive         Boolean            @default(true)
  user             UsersMaster        @relation(fields: [userId], references: [userId])
  ward             WardMaster         @relation(fields: [wardId], references: [wardId])
  mohalla          MohallaMaster      @relation(fields: [mohallaId], references: [mohallaId])
  wardMohallaMap   WardMohallaMapping @relation(fields: [wardMohallaMapId], references: [wardMohallaMapId])
  assignedBy       UsersMaster        @relation("AssignedBy", fields: [assignedById], references: [userId])

  @@unique([userId, wardId, mohallaId])
}

model WardStatusMapping {
  wardStatusId String           @id @default(uuid())
  wardId       String
  statusId     String
  changedById  String
  isActive     Boolean          @default(true)
  ward         WardMaster       @relation(fields: [wardId], references: [wardId])
  status       WardStatusMaster @relation(fields: [statusId], references: [statusId])
  changedBy    UsersMaster      @relation(fields: [changedById], references: [userId])

  @@unique([wardId, statusId])
}

model SurveyStatusMapping {
  statusMappingId  String              @id @default(uuid())
  surveyUniqueCode String
  statusId         String
  revertedFromId   String?
  changedById      String
  isActive         Boolean             @default(true)
  survey           SurveyDetails       @relation(fields: [surveyUniqueCode], references: [surveyUniqueCode])
  status           SurveyStatusMaster  @relation(fields: [statusId], references: [statusId])
  revertedFrom     SurveyStatusMaster? @relation("RevertedFrom", fields: [revertedFromId], references: [statusId])
  changedBy        UsersMaster         @relation(fields: [changedById], references: [userId])

  @@unique([surveyUniqueCode, statusId])
}

model UserRoleMapping {
  userRoleMapId String               @id @default(uuid())
  userId        String
  roleId        String
  isActive      Boolean              @default(true)
  user          UsersMaster          @relation(fields: [userId], references: [userId])
  role          RolePermissionMaster @relation(fields: [roleId], references: [roleId])

  @@unique([userId, roleId])
}

model Session {
  sessionId  String      @id @default(uuid())
  userId     String
  loginTime  DateTime
  logoutTime DateTime
  isActive   Boolean     @default(true)
  user       UsersMaster @relation(fields: [userId], references: [userId], onDelete: Cascade)

  @@index([userId])
}

// ------
// Users
// ------

model Surveyors {
  userId           String             @id
  surveyorName     String             @db.VarChar(50)
  username         String             @db.VarChar(50)
  password         String             @db.VarChar(250)
  wardNumber       String?             @db.VarChar(12)
  wardMohallaMapId String?
  zoneWardMapId    String?
  ulbZoneMapId     String?
  user             UsersMaster        @relation(fields: [userId], references: [userId])
  wardMohallaMap   WardMohallaMapping? @relation(fields: [wardMohallaMapId], references: [wardMohallaMapId])
  zoneWardMap      ZoneWardMapping?    @relation(fields: [zoneWardMapId], references: [zoneWardMapId])
  ulbZoneMap       UlbZoneMapping?     @relation(fields: [ulbZoneMapId], references: [ulbZoneMapId])
}

model Supervisors {
  userId         String      @id
  supervisorName String      @db.VarChar(50)
  username       String      @db.VarChar(50)
  password       String      @db.VarChar(250)
  wardId         String?
  user           UsersMaster @relation(fields: [userId], references: [userId])
  ward           WardMaster?  @relation(fields: [wardId], references: [wardId])
}

model Admins {
  userId    String      @id
  adminName String      @db.VarChar(50)
  username  String      @db.VarChar(50)
  password  String      @db.VarChar(250)
  user      UsersMaster @relation(fields: [userId], references: [userId])
}

// --------
// Surveys
// --------

model SurveyDetails {
  surveyUniqueCode                  String                             @id @default(uuid())
  uploadedById                      String
  ulbId                             String
  zoneId                            String
  wardId                            String
  mohallaId                         String
  surveyTypeId                      String
  entryDate                         DateTime                           @db.Timestamp(0)
  parcelId                          Int?
  mapId                             Int
  gisId                             String                             @db.VarChar(12)
  subGisId                          String?                            @db.VarChar(15)
  uploadedBy                        UsersMaster                        @relation("UsersMasterToSurveyDetails", fields: [uploadedById], references: [userId], onDelete: Restrict)
  ulb                               UlbMaster                          @relation(fields: [ulbId], references: [ulbId])
  zone                              ZoneMaster                         @relation(fields: [zoneId], references: [zoneId])
  ward                              WardMaster                         @relation(fields: [wardId], references: [wardId])
  mohalla                           MohallaMaster                      @relation(fields: [mohallaId], references: [mohallaId])
  surveyType                        SurveyTypeMaster                   @relation(fields: [surveyTypeId], references: [surveyTypeId])
  propertyDetails                   PropertyDetails[]
  ownerDetails                      OwnerDetails[]
  locationDetails                   LocationDetails[]
  otherDetails                      OtherDetails[]
  residentialPropertyAssessments    ResidentialPropertyAssessment[]
  nonResidentialPropertyAssessments NonResidentialPropertyAssessment[]
  propertyAttachments               PropertyAttachmentDetails[]
  surveyStatusMaps                  SurveyStatusMapping[]

  @@index([uploadedById])
}

model PropertyDetails {
  surveyUniqueCode              String                 @id
  responseTypeId                String
  oldHouseNumber                String?                @db.VarChar(15)
  electricityConsumerName       String?                @db.VarChar(50)
  waterSewerageConnectionNumber String?                @db.VarChar(50)
  respondentName                String                 @db.Char(50)
  respondentStatusId            String
  survey                        SurveyDetails          @relation(fields: [surveyUniqueCode], references: [surveyUniqueCode])
  responseType                  ResponseTypeMaster     @relation(fields: [responseTypeId], references: [responseTypeId])
  respondentStatus              RespondentStatusMaster @relation(fields: [respondentStatusId], references: [respondentStatusId])
}

model OwnerDetails {
  surveyUniqueCode  String        @id
  ownerName         String        @db.VarChar(50)
  fatherHusbandName String        @db.VarChar(50)
  mobileNumber      String?       @db.VarChar(20)
  aadharNumber      String?       @db.Char(12)
  survey            SurveyDetails @relation(fields: [surveyUniqueCode], references: [surveyUniqueCode])
}

model LocationDetails {
  surveyUniqueCode   String                 @id
  propertyLatitude   Decimal                @db.Decimal(9, 6) // changed type from Float to Decimal
  propertyLongitude  Decimal                @db.Decimal(9, 6) // changed type from Float to Decimal
  assessmentYear     String                 @db.VarChar(20)
  propertyTypeId     String
  buildingName       String?                @db.Text
  roadTypeId         String
  constructionYear   String                 @db.VarChar(20)
  constructionTypeId String
  addressRoadName    String                 @db.Text
  locality           String?                @db.Text
  pinCode            Int
  landmark           String?                @db.Text
  fourWayEast        String?                @db.Text
  fourWayWest        String?                @db.Text
  fourWayNorth       String?                @db.Text
  fourWaySouth       String?                @db.Text
  newWard            String                 @db.VarChar(20)
  survey             SurveyDetails          @relation(fields: [surveyUniqueCode], references: [surveyUniqueCode])
  propertyType       PropertyTypeMaster     @relation(fields: [propertyTypeId], references: [propertyTypeId])
  roadType           RoadTypeMaster         @relation(fields: [roadTypeId], references: [roadTypeId])
  constructionType   ConstructionTypeMaster @relation(fields: [constructionTypeId], references: [constructionTypeId])
}

model OtherDetails {
  surveyUniqueCode            String             @id
  waterSourceId               String
  rainWaterHarvestingSystem   String?            @db.Char(3)
  plantation                  String?            @db.Char(3)
  parking                     String?            @db.Char(3)
  pollution                   String?            @db.Char(3)
  pollutionMeasurementTaken   String?            @db.Text
  waterSupplyWithin200Meters  String?            @db.Char(3)
  sewerageLineWithin100Meters String?            @db.Char(3)
  disposalTypeId              String
  totalPlotArea               Float              @db.DoublePrecision
  builtupAreaOfGroundFloor    Float              @db.DoublePrecision
  remarks                     String?            @db.Text
  survey                      SurveyDetails      @relation(fields: [surveyUniqueCode], references: [surveyUniqueCode])
  waterSource                 WaterSourceMaster  @relation(fields: [waterSourceId], references: [waterSourceId])
  disposalType                DisposalTypeMaster @relation(fields: [disposalTypeId], references: [disposalTypeId])
}

model ResidentialPropertyAssessment {
  floorAssessmentId     String                   @id @default(uuid())
  surveyUniqueCode      String
  floorNumber           String                   @db.VarChar(50)
  occupancyStatusId     String
  constructionNatureId  String
  coveredArea           Decimal                  @db.Decimal(10, 2) // changed type from Float to Decimal
  allRoomVerandaArea    Decimal                  @db.Decimal(10, 2) // changed type from Float to Decimal
  allBalconyKitchenArea Decimal                  @db.Decimal(10, 2) // changed type from Float to Decimal
  allGarageArea         Decimal                  @db.Decimal(10, 2) // changed type from Float to Decimal
  carpetArea            Decimal                  @db.Decimal(10, 2) // changed type from Float to Decimal
  survey                SurveyDetails            @relation(fields: [surveyUniqueCode], references: [surveyUniqueCode])
  occupancyStatus       OccupancyStatusMaster    @relation(fields: [occupancyStatusId], references: [occupancyStatusId])
  constructionNature    ConstructionNatureMaster @relation(fields: [constructionNatureId], references: [constructionNatureId])
}

model NonResidentialPropertyAssessment {
  floorAssessmentId    String                      @id @default(uuid())
  surveyUniqueCode     String
  floorNumber          String                      @db.VarChar(50)
  nrPropertyCategoryId String
  nrSubCategoryId      String
  establishmentName    String                      @db.Text
  licenseNo            String?                     @db.VarChar(20)
  licenseExpiryDate    DateTime?
  occupancyStatusId    String
  constructionNatureId String
  builtupArea          Decimal                     @db.Decimal(10, 2) // changed type from Float to Decimal
  nrPropertyCategory   NrPropertyCategoryMaster    @relation(fields: [nrPropertyCategoryId], references: [propertyCategoryId], onDelete: Restrict)
  nrSubCategory        NrPropertySubCategoryMaster @relation(fields: [nrSubCategoryId], references: [subCategoryId], onDelete: Restrict)
  occupancyStatus      OccupancyStatusMaster       @relation(fields: [occupancyStatusId], references: [occupancyStatusId])
  constructionNature   ConstructionNatureMaster    @relation(fields: [constructionNatureId], references: [constructionNatureId])
  survey               SurveyDetails               @relation(fields: [surveyUniqueCode], references: [surveyUniqueCode])

  @@index([nrPropertyCategoryId])
  @@index([nrSubCategoryId])
}

model PropertyAttachmentDetails {
  surveyUniqueCode String        @id
  image1Url        String?       @db.VarChar(50)
  image2Url        String?       @db.VarChar(50)
  image3Url        String?       @db.VarChar(50)
  image4Url        String?       @db.VarChar(50)
  image5Url        String?       @db.VarChar(50)
  image6Url        String?       @db.VarChar(50)
  image7Url        String?       @db.VarChar(50)
  image8Url        String?       @db.VarChar(50)
  image9Url        String?       @db.VarChar(50)
  image10Url       String?       @db.VarChar(50)
  survey           SurveyDetails @relation(fields: [surveyUniqueCode], references: [surveyUniqueCode])
}

---

## âœ… Output Expected

Generate:
1. React Native form UI (`AddSurveyForm.tsx`)
2. AsyncStorage utils to save survey data locally
3. Express route/controller to receive & validate survey
4. Zod validation schema for backend
5. API service method (`api.ts`) to post survey to backend

Use modular, commented, maintainable code.
